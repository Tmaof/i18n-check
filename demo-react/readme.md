# i18n-check React Demo é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ [i18n-check](https://github.com/your-repo/i18n-check) çš„ React ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ i18n-check æ¥è‡ªåŠ¨åŒ–å›½é™…åŒ–ï¼ˆi18nï¼‰å¤„ç†æµç¨‹ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `i18n-check` å·¥å…·æ¥è‡ªåŠ¨åŒ–å¤„ç† React é¡¹ç›®ä¸­çš„å›½é™…åŒ–éœ€æ±‚ï¼ŒåŒ…æ‹¬ï¼š

- è‡ªåŠ¨æ£€æµ‹å¹¶åŒ…è£¹ä¸­æ–‡æ–‡æœ¬ä¸º `i18n.t()` è°ƒç”¨
- è‡ªåŠ¨å¯¼å…¥ i18n ç›¸å…³ä¾èµ–
- æ£€æµ‹å¹¶æå–æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ key
- ä½¿ç”¨ AI è‡ªåŠ¨ç¿»è¯‘å¹¶ç”Ÿæˆç¿»è¯‘æ–‡ä»¶

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ç¬¬ä¸€æ­¥ï¼šè‡ªåŠ¨åŒ…è£¹ i18n.t() (`check-i18n:1`)

- âœ… è‡ªåŠ¨æ£€æµ‹ä»£ç ä¸­çš„ä¸­æ–‡æ–‡æœ¬
- âœ… è‡ªåŠ¨ä¸ºä¸­æ–‡æ–‡æœ¬æ·»åŠ  `i18n.t()` åŒ…è£¹
- âœ… è‡ªåŠ¨å¯¼å…¥ i18n ç›¸å…³ä¾èµ–ï¼ˆå¦‚ `import {t} from 'i18next'`ï¼‰
- âœ… æ£€æµ‹å¹¶æ ‡è®°åŒ…å«ä¸­æ–‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæé†’æ‰‹åŠ¨å¤„ç†
- âœ… æ”¯æŒè‡ªå®šä¹‰é…ç½®ï¼Œå¯æŒ‡å®šæ£€æµ‹ç›®å½•å’Œæ–‡ä»¶ç±»å‹

### ç¬¬äºŒæ­¥ï¼šè‡ªåŠ¨ç¿»è¯‘ç”Ÿæˆ (`check-i18n:2`)

- âœ… æ£€æµ‹æ‰€æœ‰ `i18n.t()` è°ƒç”¨ï¼Œæå–æ–‡æœ¬ key
- âœ… æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆä¼šé˜»æ­¢ç¿»è¯‘æµç¨‹ï¼‰
- âœ… å¤ç”¨å·²å­˜åœ¨çš„ç¿»è¯‘ç»“æœï¼Œé¿å…é‡å¤ç¿»è¯‘
- âœ… è°ƒç”¨ AI API è¿›è¡Œæ‰¹é‡ç¿»è¯‘
- âœ… ç”Ÿæˆå®Œæ•´çš„ç¿»è¯‘æ–‡ä»¶ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰
- âœ… æ£€æµ‹å¹¶æŠ¥å‘Šé—æ¼çš„ç¿»è¯‘é¡¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16
- pnpmï¼ˆæ¨èï¼‰æˆ– npm/yarn
- AI API Keyï¼ˆç”¨äºç¿»è¯‘åŠŸèƒ½ï¼Œæ”¯æŒ OpenAI å…¼å®¹çš„ APIï¼‰

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### é…ç½®ç¯å¢ƒå˜é‡

åœ¨ä½¿ç”¨ç¿»è¯‘åŠŸèƒ½æ—¶ï¼Œéœ€è¦é…ç½® AI API Keyï¼š

```bash
API_KEY=your-api-key-here pnpm check-i18n:2
```

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®é»˜è®¤ä½¿ç”¨ DeepSeek APIï¼Œå¦‚éœ€ä½¿ç”¨å…¶ä»– AI æœåŠ¡ï¼Œè¯·ä¿®æ”¹ `scripts/check-i18n/translate.ts` ä¸­çš„é…ç½®ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å®Œæ•´å·¥ä½œæµç¨‹

#### 1. è¿è¡Œç¬¬ä¸€æ­¥ï¼šè‡ªåŠ¨åŒ…è£¹ i18n.t()

```bash
pnpm check-i18n:1
```

**åŠŸèƒ½è¯´æ˜**ï¼š

- æ‰«æ `src` ç›®å½•ä¸‹çš„æ‰€æœ‰ `.js`ã€`.jsx`ã€`.ts`ã€`.tsx` æ–‡ä»¶
- è‡ªåŠ¨ä¸ºä¸­æ–‡æ–‡æœ¬æ·»åŠ  `i18n.t()` åŒ…è£¹
- è‡ªåŠ¨æ·»åŠ å¿…è¦çš„ import è¯­å¥
- å¯¹äºæ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆå¦‚ `` `${var} ä¸­æ–‡æ–‡æœ¬` ``ï¼‰ï¼Œä¼šæ·»åŠ æ³¨é‡Šæ ‡è®°ï¼Œæé†’æ‰‹åŠ¨å¤„ç†

**ç¤ºä¾‹è½¬æ¢**ï¼š

è½¬æ¢å‰ï¼š

```tsx
const title = 'é¦–é¡µ';
const message = `æ¬¢è¿ï¼Œ${userName}ï¼`;
```

è½¬æ¢åï¼š

```tsx
import { t } from 'i18next';
const title = t('é¦–é¡µ');

const message = /** æ­¤æ¨¡ç‰ˆå­—ç¬¦ä¸²ä¸­åŒ…å«ä¸­æ–‡ */ `æ¬¢è¿ï¼Œ${userName}ï¼`;
```

#### 2. æ‰‹åŠ¨æ£€æŸ¥å’Œè°ƒæ•´

**é‡è¦**ï¼šæ‰§è¡Œç¬¬ä¸€æ­¥åï¼Œå¿…é¡»æ‰‹åŠ¨æ£€æŸ¥æ¯ä¸€å¤„ä¿®æ”¹ï¼š

1. âœ… ç¡®è®¤æ‰€æœ‰ `i18n.t()` åŒ…è£¹æ˜¯å¦æ­£ç¡®
2. âœ… å¤„ç†æ ‡è®°çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå°†å…¶è½¬æ¢ä¸ºæ­£ç¡®çš„æ ¼å¼ï¼š

   ```tsx
   // é”™è¯¯ç¤ºä¾‹
   const message = `æ¬¢è¿ï¼Œ${userName}ï¼`;

   // æ­£ç¡®ç¤ºä¾‹
   const message = t('æ¬¢è¿ï¼Œ{{userName}}ï¼', { userName });
   ```

#### 3. è¿è¡Œç¬¬äºŒæ­¥ï¼šç”Ÿæˆç¿»è¯‘æ–‡ä»¶

```bash
API_KEY=your-api-key-here pnpm check-i18n:2
```

**åŠŸèƒ½è¯´æ˜**ï¼š

- æ£€æµ‹æ‰€æœ‰ `i18n.t()` è°ƒç”¨ï¼Œæå–æ–‡æœ¬ key
- æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆå¦‚æœå­˜åœ¨ä¼šä¸­æ–­æµç¨‹ï¼‰
- å¤ç”¨å·²å­˜åœ¨çš„ç¿»è¯‘ç»“æœ
- è°ƒç”¨ AI API ç¿»è¯‘ç¼ºå¤±çš„æ–‡æœ¬
- ç”Ÿæˆç¿»è¯‘æ–‡ä»¶åˆ° `src/i18n/locales/translates.json`

**è¾“å‡ºæ–‡ä»¶**ï¼š

- `scripts/check-i18n/temp/{hash}-i18nTextKeyList.json` - æ‰€æœ‰æ£€æµ‹åˆ°çš„æ–‡æœ¬ key åˆ—è¡¨
- `scripts/check-i18n/temp/{hash}-templateTextKeyList.json` - æ¨¡æ¿å­—ç¬¦ä¸²åˆ—è¡¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- `scripts/check-i18n/temp/{hash}-translateResult.json` - å®Œæ•´ç¿»è¯‘ç»“æœ
- `scripts/check-i18n/temp/{hash}-missingTranslateTextKeyList.json` - é—æ¼çš„ç¿»è¯‘é¡¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- `src/i18n/locales/translates.json` - æœ€ç»ˆç”Ÿæˆçš„ç¿»è¯‘æ–‡ä»¶

## âš™ï¸ é…ç½®è¯´æ˜

### ä¿®æ”¹æ£€æµ‹ç›®å½•

ç¼–è¾‘ `scripts/check-i18n/config.ts` æ–‡ä»¶ï¼Œä¿®æ”¹ `srcDir` é…ç½®ï¼š

```typescript
const srcDir = path.resolve(__dirname, '../../', 'src');
```

### ä¿®æ”¹åŒ…å«/æ’é™¤çš„æ–‡ä»¶

åœ¨ `config.ts` ä¸­ä¿®æ”¹ `includeFiles` å’Œ `excludeFiles`ï¼š

```typescript
const includeFiles = ['**/*.{js,jsx,ts,tsx}'];
const excludeFiles = [
  '**/*.spec.ts',
  '**/*.test.ts',
  '**/i18n/**',
  // ... å…¶ä»–éœ€è¦æ’é™¤çš„ç›®å½•
];
```

### ä¿®æ”¹ AI ç¿»è¯‘é…ç½®

ç¼–è¾‘ `scripts/check-i18n/translate.ts`ï¼Œä¿®æ”¹ AI æœåŠ¡é…ç½®ï¼š

```typescript
const config: CallOpenAIConfig = {
  baseURL: 'https://api.deepseek.com', // ä¿®æ”¹ä¸ºä½ çš„ AI æœåŠ¡åœ°å€
  model: 'deepseek-chat', // ä¿®æ”¹ä¸ºä½ çš„æ¨¡å‹åç§°
  // ... å…¶ä»–é…ç½®
};
```

### ä¿®æ”¹ç¿»è¯‘æç¤ºè¯

ç¼–è¾‘ `scripts/check-i18n/aiTranslatePrompt.md` æ¥è‡ªå®šä¹‰ AI ç¿»è¯‘çš„æç¤ºè¯ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
demo-react/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ index.ts              # i18n åˆå§‹åŒ–é…ç½®
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â””â”€â”€ translates.json  # ç¿»è¯‘æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ views/                    # ç¤ºä¾‹é¡µé¢ç»„ä»¶
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ check-i18n/               # i18n æ£€æŸ¥è„šæœ¬
â”‚       â”œâ”€â”€ index.ts              # ä¸»å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ config.ts             # é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ translate.ts          # ç¿»è¯‘åŠŸèƒ½å®ç°
â”‚       â”œâ”€â”€ aiTranslatePrompt.md  # AI ç¿»è¯‘æç¤ºè¯
â”‚       â””â”€â”€ temp/                 # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â””â”€â”€ package.json
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¨¡æ¿å­—ç¬¦ä¸²å¤„ç†**ï¼šåŒ…å«å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²éœ€è¦æ‰‹åŠ¨è½¬æ¢ä¸º `i18n.t()` çš„å‚æ•°å½¢å¼
2. **API Key å®‰å…¨**ï¼šä¸è¦å°† API Key æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
3. **ç¿»è¯‘è´¨é‡**ï¼šAI ç¿»è¯‘ç»“æœå»ºè®®äººå·¥å®¡æ ¸ï¼Œç‰¹åˆ«æ˜¯ä¸“ä¸šæœ¯è¯­
4. **æ–‡ä»¶å¤‡ä»½**ï¼šæ‰§è¡Œè„šæœ¬å‰å»ºè®®æäº¤ä»£ç ï¼Œä»¥ä¾¿å›æ»š
5. **æ’é™¤æ–‡ä»¶**ï¼šç¡®ä¿ `excludeFiles` é…ç½®æ­£ç¡®ï¼Œé¿å…å¤„ç†ä¸éœ€è¦çš„æ–‡ä»¶

## ğŸ› ï¸ è‡ªå®šä¹‰æ‰©å±•

è„šæœ¬ä½äº `scripts/check-i18n/` ç›®å½•ä¸‹ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼š

- **ä¿®æ”¹æ£€æµ‹è§„åˆ™**ï¼šç¼–è¾‘ `config.ts` ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼
- **ä¿®æ”¹ç¿»è¯‘é€»è¾‘**ï¼šç¼–è¾‘ `translate.ts` ä¸­çš„ç¿»è¯‘å‡½æ•°
- **æ·»åŠ æ–°åŠŸèƒ½**ï¼šåœ¨ `index.ts` ä¸­æ·»åŠ æ–°çš„å¤„ç†å‡½æ•°

## ğŸ“ ç¤ºä¾‹

### ç¿»è¯‘æ–‡ä»¶æ ¼å¼

ç”Ÿæˆçš„ `translates.json` æ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "é¦–é¡µ": {
    "zh": "é¦–é¡µ",
    "en": "Home"
  },
  "å…³äº": {
    "zh": "å…³äº",
    "en": "About"
  },
  "æ¬¢è¿ï¼Œ{{name}}ï¼": {
    "zh": "æ¬¢è¿ï¼Œ{{name}}ï¼",
    "en": "Welcome, {{name}}!"
  }
}
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('é¦–é¡µ')}</h1>
      <p>{t('æ¬¢è¿ï¼Œ{{name}}ï¼', { name: 'ç”¨æˆ·' })}</p>
    </div>
  );
}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªç¤ºä¾‹é¡¹ç›®ã€‚
